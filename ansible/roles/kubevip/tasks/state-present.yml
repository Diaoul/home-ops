---
- name: install kube-vip rbac
  kubernetes.core.k8s:
    state: present
    src: /tmp/kube-vip-rbac.yaml
  run_once: yes
  delegate_to: localhost

- name: install kube-vip daemonset
  kubernetes.core.k8s:
    template: daemonset.yaml.j2
  run_once: yes
  delegate_to: localhost

- name: download kube-vip rbac manifest
  get_url:
    url: https://kube-vip.io/manifests/rbac.yaml
    dest: /tmp/kube-vip-rbac.yaml
    mode: '0664'
  run_once: yes
  delegate_to: localhost
