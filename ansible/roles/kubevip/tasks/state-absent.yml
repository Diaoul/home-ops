---
- name: remove kube-vip daemonset
  kubernetes.core.k8s:
    state: absent
    template: daemonset.yaml.j2
  ignore_errors: true  # noqa ignore-errors
  run_once: true
  delegate_to: localhost

- name: download kube-vip rbac manifest
  ansible.builtin.get_url:
    url: https://kube-vip.io/manifests/rbac.yaml
    dest: /tmp/kube-vip-rbac.yaml
    mode: '0664'
  run_once: true
  delegate_to: localhost

- name: remove kube-vip rbac
  kubernetes.core.k8s:
    state: absent
    src: /tmp/kube-vip-rbac.yaml
  run_once: true
  delegate_to: localhost
